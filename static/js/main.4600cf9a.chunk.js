(this["webpackJsonpschool-data-table"]=this["webpackJsonpschool-data-table"]||[]).push([[0],{197:function(e,t,a){e.exports=a(434)},202:function(e,t,a){},203:function(e,t,a){},220:function(e,t){},222:function(e,t){},232:function(e,t){},234:function(e,t){},259:function(e,t){},261:function(e,t){},262:function(e,t){},268:function(e,t){},270:function(e,t){},288:function(e,t){},290:function(e,t){},302:function(e,t){},305:function(e,t){},310:function(e,t){},312:function(e,t){},335:function(e,t){},426:function(e,t,a){},434:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(186),o=a.n(l),i=(a(202),a(203),a(101)),s=a(100),c=a.n(s),u=a(187),d=a(188),m=a(189),g=a(195),f=a(194),h=a(190),E=a.n(h),b=a(191),C=a.n(b),v=a(192),w=a.n(v),k=(a(426),function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).getDatafromUrl=Object(u.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,E()({delimiter:["|"]}).fromStream(C.a.get("https://raw.githubusercontent.com/openbangalore/bangalore/master/bangalore/Education/Bangalore_schools.csv")).subscribe((function(e){return new Promise((function(a,n){a(t.push(e))}))}));case 3:t=t.splice(1,t.length-2),n.setState({json_data:t});case 5:case"end":return e.stop()}}),e)}))),n.setSearchValue=function(e){n.setState({searchValue:e.target.value})},n.removeSearch=function(){n.setState({searching:!1})},n.onSearchClick=function(){var e=n.getFilteredData("search");n.setState({filtered_data:e,searching:!0})},n.onFilterClick=function(e){var t=n.getFilteredData("filter",e.target.name,e.target.id);n.setState({filtered_data:t,filtering:!0}),console.log(n.state.filtered_data)},n.getFilteredData=function(e,t,a){var r;if(console.log(e+" "+t+" "+a),!1===n.state.searching&&!1===n.state.filtering){if("search"===e)console.log("searching"+n.state.searching+n.state.filtering),r=n.state.json_data.filter((function(e){return e.schoolname.toLowerCase().includes(n.state.searchValue.toLowerCase())||e.address.toLowerCase().includes(n.state.searchValue.toLowerCase())||e.schoolid.toLowerCase().includes(n.state.searchValue.toLowerCase())||e.pincode.toLowerCase().includes(n.state.searchValue.toLowerCase())||e.landmark.toLowerCase().includes(n.state.searchValue.toLowerCase())||e.area.toLowerCase().includes(n.state.searchValue.toLowerCase())}));else if("filter"===e){console.log("Filtering"),r=n.state.json_data.filter((function(e){return e[t]===a}))}return r}if("search"===e)r=n.state.filtered_data.filter((function(e){return e.schoolname.toLowerCase().includes(n.state.searchValue.toLowerCase())||e.address.toLowerCase().includes(n.state.searchValue.toLowerCase())||e.schoolid.toLowerCase().includes(n.state.searchValue.toLowerCase())}));else if("filter"===e){r=n.state.filtered_data.filter((function(e){return e[t]===a}))}return r},n.toggleFilter=function(e){switch(console.log(e.target.id),e.target.id){case"gender":var t=n.getPossibleFilters(e.target.id);n.setState({genderFilters:t,genderToggle:!n.state.genderToggle});break;case"category":var a=n.getPossibleFilters(e.target.id);n.setState({categoryFilters:a,categoryToggle:!n.state.categoryToggle});break;case"medium_of_inst":var r=n.getPossibleFilters(e.target.id);n.setState({mediumFilters:r,mediumToggle:!n.state.mediumToggle})}console.log(n.state.genderFilters)},n.getPossibleFilters=function(e){var t=new Set;if(!1===n.state.searching&&!1===n.state.filtering){for(var a in n.state.json_data)t.add(n.state.json_data[a][e]);return Object(i.a)(t)}for(var r in n.state.filtered_data)t.add(n.state.filtered_data[r][e]);return Object(i.a)(t)},n.getArray=function(){return!1===n.state.searching&&!1===n.state.filtering?n.state.json_data:n.state.filtered_data},n.removeFilters=function(){n.setState({sorting:!1,filtering:!1,filtered_data:[]})},n.getSortedData=function(e,t){var a,r=n.getArray();"up"===t?a=r.sort((function(t,a){return t[e]>a[e]?1:-1})):"down"===t&&(a=r.sort((function(t,a){return t[e]<a[e]?1:-1}))),n.setState({filtered_data:a,sorting:!0})},n.state={json_data:[],filtered_data:[],searching:!1,searchValue:"",sorting:!1,filtering:!1,genderToggle:!1,categoryToggle:!1,mediumToggle:!1,genderFilters:[],categoryFilters:[],mediumFilters:[]},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.getDatafromUrl()}},{key:"render",value:function(){var e=this;return console.log(this.state.filtering+" "+this.state.searching),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"main-component"},r.a.createElement("div",{className:"buttons"},r.a.createElement("div",{className:"search"},r.a.createElement("input",{placeholder:"search",type:"text",onChange:this.setSearchValue}),r.a.createElement(w.a,{className:"search-button",onClick:this.onSearchClick},"search")),r.a.createElement("button",{onClick:this.removeSearch},"remove search"),r.a.createElement("button",{onClick:this.removeFilters},"remove filters")),r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"address",r.a.createElement("button",{id:"address",name:"up",onClick:function(t){return e.getSortedData(t.target.id,t.target.name)}},"\u2b06"),r.a.createElement("button",{id:"address",name:"down",onClick:function(t){return e.getSortedData(t.target.id,t.target.name)}},"\u2b07")),r.a.createElement("th",null,"area"),r.a.createElement("th",null,"schoolname",r.a.createElement("button",{id:"schoolname",name:"up",onClick:function(t){return e.getSortedData(t.target.id,t.target.name)}},"\u2b06"),r.a.createElement("button",{id:"schoolname",name:"down",onClick:function(t){return e.getSortedData(t.target.id,t.target.name)}},"\u2b07")),r.a.createElement("th",null,"pincode"),r.a.createElement("th",null,"schoolid"),r.a.createElement("th",null,"landmark"),r.a.createElement("th",null,r.a.createElement("button",{onClick:this.toggleFilter,id:"gender"},"gender"),!0===this.state.genderToggle?r.a.createElement("div",{className:"filter"},this.state.genderFilters.map((function(t){return r.a.createElement("button",{className:"filter",id:t,name:"gender",onClick:function(t){e.onFilterClick(t)}},t)}))):null),r.a.createElement("th",null,r.a.createElement("button",{onClick:this.toggleFilter,id:"category"},"category"),!0===this.state.categoryToggle?r.a.createElement("div",{className:"filter"},this.state.categoryFilters.map((function(t){return r.a.createElement("button",{className:"filter",id:t,name:"category",onClick:function(t){e.onFilterClick(t)}},t)}))):null),r.a.createElement("th",null,r.a.createElement("button",{onClick:this.toggleFilter,id:"medium_of_inst"},"medium_of_inst"),!0===this.state.mediumToggle?r.a.createElement("div",{className:"filter"},this.state.mediumFilters.map((function(t){return r.a.createElement("button",{className:"filter",id:t,name:"medium_of_inst",onClick:function(t){e.onFilterClick(t)}},t)}))):null))),r.a.createElement("tbody",null,!1===this.state.filtering&&!1===this.state.searching&&!1===this.state.sorting?this.state.json_data.map((function(e){return console.log("original data"),r.a.createElement("tr",{key:e.schoolid},r.a.createElement("td",null,e.address),r.a.createElement("td",null,e.area),r.a.createElement("td",null,e.schoolname),r.a.createElement("td",null,e.pincode),r.a.createElement("td",null,e.schoolid),r.a.createElement("td",null,e.landmark),r.a.createElement("td",null,e.gender),r.a.createElement("td",null,e.category),r.a.createElement("td",null,e.medium_of_inst))})):this.state.filtered_data.map((function(e){return console.log("rendering filtered data"),r.a.createElement("tr",{key:e.schoolid},r.a.createElement("td",null,e.address),r.a.createElement("td",null,e.area),r.a.createElement("td",null,e.schoolname),r.a.createElement("td",null,e.pincode),r.a.createElement("td",null,e.schoolid),r.a.createElement("td",null,e.landmark),r.a.createElement("td",null,e.gender),r.a.createElement("td",null,e.category),r.a.createElement("td",null,e.medium_of_inst))}))))))}}]),a}(n.Component));var p=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(k,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(p,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[197,1,2]]]);
//# sourceMappingURL=main.4600cf9a.chunk.js.map